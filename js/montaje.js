!function(a){function e(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return a[t].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=a,e.c=n,e.i=function(a){return a},e.d=function(a,n,t){e.o(a,n)||Object.defineProperty(a,n,{configurable:!1,enumerable:!0,get:t})},e.n=function(a){var n=a&&a.__esModule?function(){return a.default}:function(){return a};return e.d(n,"a",n),n},e.o=function(a,e){return Object.prototype.hasOwnProperty.call(a,e)},e.p="",e(e.s=2)}({2:function(a,e){$(document).ready(function(){function a(){$.ajax({url:"funciones.php",type:"POST",data:{pedir:"motor"},success:function(a){$(".zona").nextAll(".montaje").remove(),$("form.formulario").append(a),$(".motor").fadeIn(),e()}})}function e(){$("body").on("change","#motor",function(){var a=$("select#zona").val(),e=$(this).val();$.ajax({url:"funciones.php",type:"POST",data:{motor:e,zona:a},success:function(a){$(".pieza").length&&$(".pieza").remove(),$("form.formulario").append(a),$(".pieza").fadeIn(),n()}})})}function n(){$("#pieza").on("change",function(){var a=$("select#pieza").val();$.ajax({url:"funciones.php",type:"POST",data:{pieza:a},success:function(a){var e,n=/D[EH][0-9]{4}R?$/i,t=/HH[0-9]{4}R?$/i,o=/MG[0-9]{4}R?$/i,i=/XG[0-9]{4}R?$/i,s=/^[JSRBYNPU]{1}.{3,}/i;0===$('input[name="nameplate"]').length&&($("form.formulario").append(a),$(".nameplate, .of").fadeIn()),$("body").on("keyup",'input[name="nameplate"]',function(){e=$('input[name="nameplate"]'),e.val().length>3?e.on("keyup",function(){if(p(e.val(),e),n.test(e.val())||t.test(e.val())||o.test(e.val())||i.test(e.val())||s.test(e.val())){if(s.test(e.val())){var a=e.val().toUpperCase();e.val(a)}$(".nameplate").hasClass("has-error")&&$(".nameplate").removeClass("has-error"),$(".nombre").fadeIn()}else $(".nameplate").addClass("has-error"),$(".nombre").length&&$(".nombre").fadeOut()}):($('input[name="nombre"]').val(""),$(".nombre").fadeOut(),$("button").length>0&&$("button").remove())}),$("body").on("keyup",$('input[name="of"]'),function(){/^[0-9]{9}$/.test($('input[name="of"]').val())?($('input[name="of"]').parent().removeClass("has-error"),$(".of").find("span.error").length&&$(".of").find("span.error").remove()):$('input[name="of"]').parent().addClass("has-error")}),$('input[name="of"]').on("focus",function(){$(this).val(22355)}),$('input[name="nombre"]').on("focusin",function(){/^[0-9]{9}$/.test($('input[name="of"]').val())||$('input[name="of"]').val("")}),$('input[name="nombre"]').on("keyup",function(){/^\d/.test($('input[name="nombre"]').val())||0!==$(".nonumerico").length?0!==$(".nonumerico").length&&$(".nonumerico").remove():($(".nombre").append('<strong class="error nonumerico"> Solo se permite el número de usuario</strong>'),$('input[name="nombre"]').val("")),/^[0-9]{9}$/.test($('input[name="of"]').val())||$(".of").find("span.error").length||($('input[name="of"]').val(""),$(".of").append('<span class="error"> OF incorrecta</span>')),$(this).val().length>2&&$("button").length<1&&$("form.formulario").append('<div class="form-group"><button type="button" class="btn btn-primary btn-lg enviar">Enviar</button></div>'),$(this).val().length>2&&$("button").length>0&&$("button").fadeIn(),$(this).val().length<3&&$("button").length>0&&$("button").fadeOut()})}})})}function t(){/^[^A-Za-z]/.test($('input[name="nameplate"]').val())&&($("div#error-numero").dialog({autoOpen:!1,modal:!0,closeOnEscape:!0,title:"Error",buttons:{CERRAR:function(a){$(this).dialog("close"),a.preventDefault()}}}),$("div#error-numero").dialog("open"),$('input[name="nameplate"]').val(""))}function o(a){$.ajax({url:"almacen.php",type:"POST",dataType:"json",data:{consumirNgvLp1:!0,nameplate:a}}).done(function(a){0===a.error?$("#ngvlp1consumido").dialog(b).dialog("open"):alert("Ocurrió un error")}).fail(function(){alert("Error en consumición NGV LP1")})}function i(a){$.ajax({url:"almacen.php",type:"POST",dataType:"json",data:{consumirNgvIp:!0,nameplate:a}}).done(function(a){0===a.error?$("#ngvipconsumido").dialog(g).dialog("open"):alert("Ocurrió un error")}).fail(function(){alert("Error en consumición NGV IP")})}function s(a){$.ajax({url:"almacen.php",type:"POST",dataType:"json",data:{consumirsoporte:!0,nameplate:a}}).done(function(a){0===a.error?$("#soporteconsumido").dialog(_).dialog("open"):alert("Ocurrió un error")}).fail(function(){alert("Error en consumición SOPORTE")})}function l(a){$.ajax({url:"almacen.php",type:"POST",dataType:"json",data:{consumircaseip:!0,nameplate:a}}).done(function(a){0===a.error?$("#caseipconsumido").dialog(y).dialog("open"):alert("Ocurrió un error")}).fail(function(){alert("Error en consumición SOPORTE")})}function r(a){$.ajax({url:"almacen.php",type:"POST",dataType:"json",data:{consumirAlabeIp:!0,nameplate:a}}).done(function(a){0===a.error?$("#alabeconsumido").dialog(h).dialog("open"):alert("Ocurrió un error")}).fail(function(){alert("Error en consumición ALABE IP")})}function d(a){$.ajax({url:"funciones.php",type:"POST",data:{seriengv:a}}).done(function(e){if($(".dropdown-cierres").append('<li class="badges-ngvs"></li>'),$(".dropdown-cierres form").fadeOut(),$(".dropdown-cierres li.badges-ngvs").append("<h4>"+a+"</h4><hr>").hide().fadeIn(),e.length){for(var n=0;n<e.length;n++)14==e[n].id_piezas&&2==e[n].status&&$(".dropdown-cierres li.badges-ngvs").append('<span class="cerrado label label-success"><i class="fa fa-check-square" aria-hidden="true"></i> NGV2</span>').hide().fadeIn(),15==e[n].id_piezas&&2==e[n].status&&$(".dropdown-cierres li.badges-ngvs").append('<span class="cerrado label label-success"><i class="fa fa-check-square" aria-hidden="true"></i> NGV3</span>').hide().fadeIn(),16==e[n].id_piezas&&2==e[n].status&&$(".dropdown-cierres li.badges-ngvs").append('<span class="cerrado label label-success"><i class="fa fa-check-square" aria-hidden="true"></i> NGV4</span>').hide().fadeIn(),17==e[n].id_piezas&&2==e[n].status&&$(".dropdown-cierres li.badges-ngvs").append('<span class="cerrado label label-success"><i class="fa fa-check-square" aria-hidden="true"></i> NGV5</span>').hide().fadeIn(),18==e[n].id_piezas&&2==e[n].status&&$(".dropdown-cierres li.badges-ngvs").append('<span class="cerrado label label-success"><i class="fa fa-check-square" aria-hidden="true"></i> NGV6</span>').hide().fadeIn();$(".dropdown-cierres li.badges-ngvs span:contains('NGV2')").length||$(".dropdown-cierres li.badges-ngvs").append('<span class="cerrado label label-danger"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> NGV2</span>').hide().fadeIn(),$(".dropdown-cierres li.badges-ngvs span:contains('NGV3')").length||$(".dropdown-cierres li.badges-ngvs").append('<span class="cerrado label label-danger"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> NGV3</span>').hide().fadeIn(),$(".dropdown-cierres li.badges-ngvs span:contains('NGV4')").length||$(".dropdown-cierres li.badges-ngvs").append('<span class="cerrado label label-danger"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> NGV4</span>').hide().fadeIn(),$(".dropdown-cierres li.badges-ngvs span:contains('NGV5')").length||2!=e[0].id_tipos_motor&&3!=e[0].id_tipos_motor&&4!=e[0].id_tipos_motor&&5!=e[0].id_tipos_motor&&6!=e[0].id_tipos_motor&&7!=e[0].id_tipos_motor||$(".dropdown-cierres li.badges-ngvs").append('<span class="cerrado label label-danger"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> NGV5</span>').hide().fadeIn(),$(".dropdown-cierres li.badges-ngvs span:contains('NGV6')").length||3!=e[0].id_tipos_motor&&4!=e[0].id_tipos_motor&&5!=e[0].id_tipos_motor&&6!=e[0].id_tipos_motor&&7!=e[0].id_tipos_motor||$(".dropdown-cierres li.badges-ngvs").append('<span class="cerrado label label-danger"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> NGV6</span>').hide().fadeIn(),tinysort("li.badges-ngvs>span")}else $(".dropdown-cierres li.badges-ngvs").append('<span class="cerrado label label-warning">NO SE HAN ENCONTRADO DATOS DE ESTE MÓDULO</span>').hide().fadeIn()})}function p(a,e){var n=/^D[^H]\d+/i,t=/^D[^E]\d+/i,o=/^M[^G]\d+/i,i=/^H[^H]\d+/i,s=/^X[^G]\d+/i,l=a,r=$("select#zona"),d=e,p="";!n.test(l)||1!=r.val()&&2!=r.val()&&4!=r.val()&&5!=r.val()&&6!=r.val()&&7!=r.val()&&9!=r.val()&&0!=r.val().length?/^dh/.test(l)?d.val(l.toUpperCase()):!t.test(l)||3!=r.val()&&8!=r.val()?o.test(l)?/^M8/i.test(l)?(p=l.replace(/^M8/i,"MG"),d.val(p)):/^M[^G8]/i.test(l)&&(p=l.replace(/M/i,"MG"),d.val(p)):/^mg/i.test(l)?d.val(l.toUpperCase()):i.test(l)?/^H8/i.test(l)?(p=l.replace(/^H8/i,"HH"),d.val(p)):/^H[^8H]/i.test(l)&&(p=l.replace(/^H/i,"HH"),d.val(p)):/^hh/i.test(l)?d.val(l.toUpperCase()):s.test(l)?/^X[^G8]/i.test(l)?(p=l.replace(/^X/i,"XG"),d.val(p)):/^X8/i.test(l)&&(p=l.replace(/^X8/i,"XG"),d.val(p)):/^xg/i.test(l)?d.val(l.toUpperCase()):/^P/i.test(l)?d.val(l):d.val(l.toUpperCase()):/^D5/i.test(l)?(p=l.replace(/^D5/i,"DE"),d.val(p)):/^D[^E5]/i.test(l)&&(p=l.replace(/^D/i,"DE"),d.val(p)):/^D8/i.test(l)?(p=l.replace(/^D8/i,"DH"),d.val(p)):/^DE/i.test(l)?(p=l.replace(/^DE/i,"DH"),d.val(p)):/^D[^H8]/i.test(l)&&(p=l.replace(/^D/i,"DH"),d.val(p))}function c(a){var e,n=a.val(),t=a;/^DE/i.test(n)||(/^D[^E]\d+/i.test(n)?(e=n.replace(/^D/i,"DE"),t.val(e)):/^D5/i.test(n)?(e=n.replace(/^D5/i,"DE"),t.val(e)):/^[^D]/i.test(n)&&(alert('El nameplate debe comenzar con la letra "D"'),t.val("")))}function u(a,e){var n;n="disco"==a?"listado-en-buffer":"alabes"==a?"listado-en-buffer-alabes":"listado-en-buffer-ngvs";var t="",o=/^D/i,i=/^H/i,s=/^M/i,l=/^X/i,r=/^U/i,d=/^Y/i,p=/^N/i;if("disco"==a||"alabes"==a)for(var c=0;c<e.length;c++)t+=o.test(e[c].nameplate)?48==e[c].alabe_piezas_id_pieza?'<button class="btn btn-t700 '+n+'" id="'+e[c].id+'"><img src="img/curvicos.png"></br><small>LP'+e[c].disco_piezas_id_pieza+" "+e[c].nameplate+"</small></button>":'<button class="btn btn-t700 '+n+'" id="'+e[c].id+'"><i class="fa fa-2x fa-archive" aria-hidden="true"></i></br><small>LP'+e[c].disco_piezas_id_pieza+" "+e[c].nameplate+"</small></button>":i.test(e[c].nameplate)?49==e[c].alabe_piezas_id_pieza?'<button class="btn btn-success '+n+'" id="'+e[c].id+'"><img src="img/curvicos.png"></br><small>LP'+e[c].disco_piezas_id_pieza+" "+e[c].nameplate+"</small></button>":'<button class="btn btn-success '+n+'" id="'+e[c].id+'"><i class="fa fa-2x fa-archive" aria-hidden="true"></i></br><small>LP'+e[c].disco_piezas_id_pieza+" "+e[c].nameplate+"</small></button>":s.test(e[c].nameplate)?50==e[c].alabe_piezas_id_pieza?'<button class="btn btn-danger '+n+'" id="'+e[c].id+'"><img src="img/curvicos.png"></br><small>LP'+e[c].disco_piezas_id_pieza+" "+e[c].nameplate+"</small></button>":'<button class="btn btn-danger '+n+'" id="'+e[c].id+'"><i class="fa fa-2x fa-archive" aria-hidden="true"></i></br><small>LP'+e[c].disco_piezas_id_pieza+" "+e[c].nameplate+"</small></button>":l.test(e[c].nameplate)?50==e[c].alabe_piezas_id_pieza?'<button class="btn btn-warning '+n+'" id="'+e[c].id+'"><img src="img/curvicos.png"></br><small>LP'+e[c].disco_piezas_id_pieza+" "+e[c].nameplate+"</small></button>":'<button class="btn btn-warning '+n+'" id="'+e[c].id+'"><i class="fa fa-2x fa-archive" aria-hidden="true"></i></br><small>LP'+e[c].disco_piezas_id_pieza+" "+e[c].nameplate+"</small></button>":r.test(e[c].nameplate)?50==e[c].alabe_piezas_id_pieza?'<button class="btn btn-t7000 '+n+'" id="'+e[c].id+'"><img src="img/curvicos.png"></br><small>LP'+e[c].disco_piezas_id_pieza+" "+e[c].nameplate+"</small></button>":'<button class="btn btn-t7000 '+n+'" id="'+e[c].id+'"><i class="fa fa-2x fa-archive" aria-hidden="true"></i></br><small>LP'+e[c].disco_piezas_id_pieza+" "+e[c].nameplate+"</small></button>":p.test(e[c].nameplate)?50==e[c].alabe_piezas_id_pieza?'<button class="btn btn-ten '+n+'" id="'+e[c].id+'"><img src="img/curvicos.png"></br><small>LP'+e[c].disco_piezas_id_pieza+" "+e[c].nameplate+"</small></button>":'<button class="btn btn-ten '+n+'" id="'+e[c].id+'"><i class="fa fa-2x fa-archive" aria-hidden="true"></i></br><small>LP'+e[c].disco_piezas_id_pieza+" "+e[c].nameplate+"</small></button>":d.test(e[c].nameplate)?50==e[c].alabe_piezas_id_pieza?'<button class="btn btn-97k '+n+'" id="'+e[c].id+'"><img src="img/curvicos.png"></br><small>LP'+e[c].disco_piezas_id_pieza+" "+e[c].nameplate+"</small></button>":'<button class="btn btn-97k '+n+'" id="'+e[c].id+'"><i class="fa fa-2x fa-archive" aria-hidden="true"></i></br><small>LP'+e[c].disco_piezas_id_pieza+" "+e[c].nameplate+"</small></button>":50==e[c].alabe_piezas_id_pieza?'<button class="btn btn-default '+n+'" id="'+e[c].id+'"><img src="img/curvicos.png"></br><small>LP'+e[c].disco_piezas_id_pieza+" "+e[c].nameplate+"</small></button>":'<button class="btn btn-default '+n+'" id="'+e[c].id+'"><i class="fa fa-2x fa-archive" aria-hidden="true"></i></br><small>LP'+e[c].disco_piezas_id_pieza+" "+e[c].nameplate+"</small></button>";else for(var c=0;c<e.length;c++)t+=o.test(e[c].nameplate)?'<button class="btn btn-t700 '+n+'" id="'+e[c].id+'"><i class="fa fa-2x fa-archive" aria-hidden="true"></i></br><small>'+e[c].etapa+" "+e[c].nameplate+"</small></button>":i.test(e[c].nameplate)?'<button class="btn btn-success '+n+'" id="'+e[c].id+'"><i class="fa fa-2x fa-archive" aria-hidden="true"></i></br><small>'+e[c].etapa+" "+e[c].nameplate+"</small></button>":s.test(e[c].nameplate)?'<button class="btn btn-danger '+n+'" id="'+e[c].id+'"><i class="fa fa-2x fa-archive" aria-hidden="true"></i></br><small>'+e[c].etapa+" "+e[c].nameplate+"</small></button>":l.test(e[c].nameplate)?'<button class="btn btn-warning '+n+'" id="'+e[c].id+'"><i class="fa fa-2x fa-archive" aria-hidden="true"></i></br><small>'+e[c].etapa+" "+e[c].nameplate+"</small></button>":r.test(e[c].nameplate)?'<button class="btn btn-t7000 '+n+'" id="'+e[c].id+'"><i class="fa fa-2x fa-archive" aria-hidden="true"></i></br><small>'+e[c].etapa+" "+e[c].nameplate+"</small></button>":p.test(e[c].nameplate)?'<button class="btn btn-ten '+n+'" id="'+e[c].id+'"><i class="fa fa-2x fa-archive" aria-hidden="true"></i></br><small>'+e[c].etapa+" "+e[c].nameplate+"</small></button>":d.test(e[c].nameplate)?'<button class="btn btn-97k '+n+'" id="'+e[c].id+'"><i class="fa fa-2x fa-archive" aria-hidden="true"></i></br><small>'+e[c].etapa+" "+e[c].nameplate+"</small></button>":'<button class="btn btn-default '+n+'" id="'+e[c].id+'"><i class="fa fa-2x fa-archive" aria-hidden="true"></i></br><small>'+e[c].etapa+" "+e[c].nameplate+"</small></button>";return t}toastr.options.progressBar=!0,$("select#zona").load("funciones.php",{cargar:"zona"}),$("body").on("change","#zona",function(){a()}),$("body").on("change","#motor",function(){$(".montaje").first().nextAll(".montaje").remove()}),$("#confirmconsumirngvlp1 input").on("keyup",function(){c($("#confirmconsumirngvlp1 input"))}),$("#confirmconsumirsoporte input").on("keyup",function(){c($("#confirmconsumirsoporte input"))}),$("#confirmconsumircaseip").on("keyup",function(){c($("#confirmconsumircaseip input"))}),$("#confirmconsumirngvip input").on("keyup",function(){c($("#confirmconsumirngvip input"))}),$("#confirmconsumiralabeip input").on("keyup",function(){c($("#confirmconsumiralabeip input"))}),$("body").on("click","button.enviar",function(a){a.preventDefault();var e=$("select#pieza").val(),n=$("select#motor").val(),t=$("select#zona").val(),o=$('input[name="nameplate"]').val(),i=$('input[name="nombre"]').val(),s=$('input[name="of"]').val();$.ajax({url:"funciones.php",type:"POST",data:{eng:n,loc:t,part:e,montador:i,enviado:"enviado",plate:o,of:s},success:function(a){void 0!=a&&1==a.contador?(toastr.warning('Este aviso ya se puso con anterioridad. Si quieres forzar el aviso, incluye al final del número de serie del módulo una "R".',"Aviso duplicado"),$(".zona").nextAll(".form-group").remove(),$("#zona option:eq(0)").prop("selected",!0)):(toastr.success("Aviso enviado correctamente.","Aviso enviado"),$(".zona").nextAll(".form-group").remove(),$("#zona option:eq(0)").prop("selected",!0))}})}),$("body").on("keyup",'input[name="nombre"]',function(a){if(13==a.which&&$('input[name="nombre"]').length>0){var e=$("select#pieza").val(),n=$("select#motor").val(),t=$("select#zona").val(),o=$('input[name="nombre"]').val(),i=$('input[name="nameplate"]').val(),s=$('input[name="of"]').val();$('input[name="nameplate"]').val().length>3&&$('input[name="nombre"]').val().length>2&&$.ajax({url:"funciones.php",type:"POST",data:{eng:n,loc:t,part:e,montador:o,enviado:"enviado",plate:i,of:s},success:function(a){void 0!=a&&1==a.contador?(toastr.warning('Este aviso ya se puso con anterioridad. Si quieres forzar el aviso, incluye al final del número de serie del módulo una "R".',"Aviso duplicado"),$(".zona").nextAll(".form-group").remove(),$("#zona option:eq(0)").prop("selected",!0)):(toastr.success("Aviso enviado correctamente.","Aviso enviado"),$(".zona").nextAll(".form-group").remove(),$("#zona option:eq(0)").prop("selected",!0))}})}}),$(document).on("keyup","input.nameplate",t),$("form").on("submit",function(a){return!1});var m=$("input#nameplate-eje");$(".btn-solicitar-eje").prop("disabled",!0),$("body").on("keyup",m,function(){m.val().length>3&&$(".btn-solicitar-eje").prop("disabled",!1),p(m.val(),m)}),$("body").on("click",".btn-solicitar-eje",function(){var a=$("#nameplate-eje").val();$.post("almacen.php",{solicitareje:1,nameplate:a}).done(function(){$("#solicitar-eje").modal("hide")})});var f=$("input#nameplate-carcasa");$(".btn-solicitar-carcasa").prop("disabled",!0),$("body").on("keyup",f,function(){f.val().length>3&&$(".btn-solicitar-carcasa").prop("disabled",!1),p(f.val(),f)}),$("body").on("click",".btn-solicitar-carcasa",function(){var a=$("#nameplate-carcasa").val();$.post("almacen.php",{solicitarcarcasa:1,nameplate:a}).done(function(){$("#solicitar-carcasa").modal("hide")})});var v=$("input#nameplate-tbh");$(".btn-solicitar-tbh").prop("disabled",!0),$("body").on("keyup",v,function(){v.val().length>3&&$(".btn-solicitar-tbh").prop("disabled",!1),p(v.val(),v)}),$("body").on("click",".btn-solicitar-tbh",function(){var a=$("#nameplate-tbh").val();$.post("almacen.php",{solicitartbh:1,nameplate:a}).done(function(){$("#solicitar-tbh").modal("hide")})}),$("body").on("click",'a[href="consumo-disco"]',function(a){a.preventDefault?a.preventDefault():a.returnValue=!1,$(".listado-discos").is(":visible")||$(".listado-discos").fadeIn(),$(".nameplate-listado span.error").length&&$(".nameplate-listado span.error").remove(),$("#nameplate-listado-discos").val(""),$.post("almacen.php",{discosparaconsumir:!0}).done(function(a){if(a.length>0){a.length;$(".listado-discos").html(function(){return u("disco",a)})}})}),$("body").on("click",".listado-en-buffer",function(){var a=$(this).attr("id");$("#trabajando").modal("show"),$.post("almacen.php",{quitarbuffer:1,id:a}).done(function(a){if($("#trabajando").modal("hide"),a.length>0){a.length}$("#consumo-discos").modal("hide"),$("#ok-consumo-discos").modal("show")})}),$("body").on("click",".enviar-consumo-disco",function(){var a=$("#nameplate-listado-discos").val(),e=$("#etapa-listado-discos").val();$("#trabajando").modal("show"),$.post("almacen.php",{quitarbufferysuministro:1,nameplate:a,etapa:e}).done(function(a){$("#trabajando").modal("hide"),0==a.error?($("#consumo-discos").modal("hide"),$("#ok-consumo-discos").modal("show")):($("input#nameplate-listado-discos").val(""),$(".nameplate-listado").append('<span class="error">No existe este disco en programación. Por favor revisa los campos.</span>'),$(".etapa").length&&$(".etapa").fadeOut())})}),$("body").on("keyup","input#nameplate-listado-discos",function(){var a=$(this);if($(".nameplate-listado span").remove(),a.val().length>3){$("#titulo-discos-en-buffer").fadeOut(),$(".listado-discos").fadeOut();var e=/D[HE][0-9]{4}R?$/i,n=/HH[0-9]{4}R?$/i,t=/MG[0-9]{4}R?$/i,o=/XG[0-9]{4}R?$/i,i=/^[JSRBYNPU]{1}.{3,}/i;if(p(a.val(),a),e.test(a.val())||n.test(a.val())||t.test(a.val())||o.test(a.val())||i.test(a.val())){if($(".enviar-consumo-disco").prop("disabled",!1),i.test(a.val())){var s=a.val().toUpperCase();a.val(s)}if($(".nameplate-listado").hasClass("has-error")&&$(".nameplate-listado").removeClass("has-error"),e.test(a.val())){$("#etapa-listado-discos").empty();for(var l=1;l<5;l++)$("#etapa-listado-discos").append('<option value="'+l+'">ETAPA '+l+"</option>")}else if(n.test(a.val())){$("#etapa-listado-discos").empty();for(var l=1;l<6;l++)$("#etapa-listado-discos").append('<option value="'+l+'">ETAPA '+l+"</option>")}else{$("#etapa-listado-discos").empty();for(var l=1;l<7;l++)$("#etapa-listado-discos").append('<option value="'+l+'">ETAPA '+l+"</option>")}$(".etapa").fadeIn()}else $(".enviar-consumo-disco").prop("disabled",!0),$(".nameplate-listado").addClass("has-error"),$(".etapa").length&&$(".etapa").fadeOut()}else $(".listado-discos").is(":visible")||$(".listado-discos").fadeIn(),$("#titulo-discos-en-buffer").is(":visible")||$("#titulo-discos-en-buffer").fadeIn(),$(".etapa").length&&$(".etapa").fadeOut()}),$("body").on("click",'a[href="consumo-alabes"]',function(a){a.preventDefault?a.preventDefault():a.returnValue=!1,$("#nameplate-listado-alabes").val(""),$(".listado-alabes").is(":visible")||$(".listado-alabes").fadeIn(),$(".nameplate-listado-alabes span.error").length&&$(".nameplate-listado-alabes span.error").remove(),$.post("almacen.php",{alabesparaconsumir:!0}).done(function(a){a.length>0&&$(".listado-alabes").html(function(){return u("alabes",a)})})}),$("body").on("click",".listado-en-buffer-alabes",function(){var a=$(this).attr("id");$("#trabajando").modal("show"),$.post("almacen.php",{quitarbufferalabes:1,id:a}).done(function(a){$("#trabajando").modal("hide");a.length;$("#consumo-alabes").modal("hide"),$("#ok-consumo-alabes").modal("show")})}),$("body").on("click",".enviar-consumo-alabes",function(){var a=$("#nameplate-listado-alabes").val(),e=$("#etapa-listado-alabes").val();$("#trabajando").modal("show"),$.post("almacen.php",{quitarbufferysuministroalabes:1,nameplate:a,etapa:e}).done(function(a){$("#trabajando").modal("hide"),0==a.error?($("#consumo-alabes").modal("hide"),$("#ok-consumo-alabes").modal("show")):($("input#nameplate-listado-alabes").val(""),$(".nameplate-listado-alabes").append('<span class="error">No existe este juego de álabes en programación. Por favor revisa los campos.</span>'),$(".etapa-alabes").length&&$(".etapa-alabes").fadeOut())})}),$("body").on("keyup","input#nameplate-listado-alabes",function(){$(".nameplate-listado-alabes span").remove();var a=$(this);if(a.val().length>3){$("#titulo-alabes-en-buffer").fadeOut(),$(".listado-alabes").fadeOut();var e=/D[HE][0-9]{4}R?$/i,n=/HH[0-9]{4}R?$/i,t=/MG[0-9]{4}R?$/i,o=/XG[0-9]{4}R?$/i,i=/^[JSRBYNPU]{1}.{3,}/i;if(p(a.val(),a),e.test(a.val())||n.test(a.val())||t.test(a.val())||o.test(a.val())||i.test(a.val())){if($(".enviar-consumo-alabes").prop("disabled",!1),i.test(a.val())){var s=a.val().toUpperCase();a.val(s);for(var l=1;l<6;l++)$("#etapa-listado-alabes").append('<option value="'+(l+45)+'">ETAPA '+l+"</option>")}if($(".nameplate-listado-alabes").hasClass("has-error")&&$(".nameplate-listado-alabes").removeClass("has-error"),e.test(a.val())){$("#etapa-listado-alabes").empty();for(var l=1;l<5;l++)$("#etapa-listado-alabes").append('<option value="'+(l+45)+'">ETAPA '+l+"</option>")}else if(n.test(a.val())){$("#etapa-listado-alabes").empty();for(var l=1;l<6;l++)$("#etapa-listado-alabes").append('<option value="'+(l+45)+'">ETAPA '+l+"</option>")}else{$("#etapa-listado-alabes").empty();for(var l=1;l<7;l++)$("#etapa-listado-alabes").append('<option value="'+(l+45)+'">ETAPA '+l+"</option>")}$(".etapa-alabes").fadeIn()}else $(".enviar-consumo-alabes").prop("disabled",!0),$(".nameplate-listado-alabes").addClass("has-error"),$(".etapa-alabes").length&&$(".etapa-alabes").fadeOut()}else $(".listado-alabes").is(":visible")||$(".listado-alabes").fadeIn(),$("#titulo-alabes-en-buffer").is(":visible")||$("#titulo-alabes-en-buffer").fadeIn(),$(".etapa-alabes").length&&$(".etapa-alabes").fadeOut()}),$("body").on("click",'a[href="consumo-ngvs"]',function(a){a=$.event.fix(a),a.preventDefault(),$("#nameplate-listado-ngvs").val(""),$(".listado-ngvs").is(":visible")||$(".listado-ngvs").fadeIn(),$(".nameplate-listado-ngvs span.error").length&&$(".nameplate-listado-ngvs span.error").remove(),$.post("almacen.php",{ngvsparaconsumir:!0}).done(function(a){a.length>0&&$(".listado-ngvs").html(function(){return u("ngvs",a)})})}),$("body").on("click",".listado-en-buffer-ngvs",function(){var a=$(this).attr("id");$("#trabajando").modal("show"),$.post("almacen.php",{quitarbufferngvs:1,id:a}).done(function(a){$("#trabajando").modal("hide");a.length;$("#consumo-ngvs").modal("hide"),$("#ok-consumo-ngvs").modal("show")})}),$("body").on("click",".enviar-consumo-ngvs",function(){var a=$("#nameplate-listado-ngvs").val(),e=$("#etapa-listado-ngvs").val();$("#trabajando").modal("show"),$.post("almacen.php",{quitarbufferysuministrongvs:1,nameplate:a,etapa:e}).done(function(a){$("#trabajando").modal("hide"),console.log(a),0==a.error?($("#consumo-ngvs").modal("hide"),$("#ok-consumo-ngvs").modal("show")):1==a.error&&($("input#nameplate-listado-ngvs").val(""),$(".nameplate-listado-ngvs").append('<span class="error">No existe este juego de NGV\'s en programación. Por favor revisa los campos.</span>'),$(".etapa-ngvs").length&&$(".etapa-ngvs").fadeOut())})}),$("body").on("keyup","input#nameplate-listado-ngvs",function(){var a=$(this);if(a.val().length>3){$("#titulo-ngvs-en-buffer").fadeOut(),$(".listado-ngvs").fadeOut();var e=/D[HE][0-9]{4}R?$/i,n=/HH[0-9]{4}R?$/i,t=/MG[0-9]{4}R?$/i,o=/XG[0-9]{4}R?$/i,i=/^[JSRBYNPU]{1}.{3,}/i;if(p(a.val(),a),e.test(a.val())||n.test(a.val())||t.test(a.val())||o.test(a.val())||i.test(a.val())){if($(".enviar-consumo-ngvs").prop("disabled",!1),i.test(a.val())){var s=a.val().toUpperCase();a.val(s);for(var l=1;l<6;l++)$("#etapa-listado-ngvs").append('<option value="'+(l+45)+'">ETAPA '+l+"</option>")}if($(".nameplate-listado-ngvs").hasClass("has-error")&&$(".nameplate-listado-ngvs").removeClass("has-error"),e.test(a.val())){a.val(a.val().toUpperCase()),$("#etapa-listado-ngvs").empty();for(var l=1;l<5;l++)$("#etapa-listado-ngvs").append('<option value="LP'+l+'">ETAPA '+l+"</option>")}else if(n.test(a.val())){a.val(a.val().toUpperCase()),$("#etapa-listado-ngvs").empty();for(var l=1;l<6;l++)$("#etapa-listado-ngvs").append('<option value="LP'+l+'">ETAPA '+l+"</option>")}else{a.val(a.val().toUpperCase()),$("#etapa-listado-ngvs").empty();for(var l=1;l<7;l++)$("#etapa-listado-ngvs").append('<option value="LP'+l+'">ETAPA '+l+"</option>")}$(".etapa-ngvs").fadeIn()}else $(".enviar-consumo-ngvs").prop("disabled",!0),$(".nameplate-listado-ngvs").addClass("has-error"),$(".etapa-ngvs").length&&$(".etapa-ngvs").fadeOut()}else $(".listado-ngvs").is(":visible")||$(".listado-ngvs").fadeIn(),$("#titulo-ngvs-en-buffer").is(":visible")||$("#titulo-ngvs-en-buffer").fadeIn(),$(".etapa-ngvs").length&&$(".etapa-ngvs").fadeOut()}),$("body").on("click","a.info-pendientes",function(a){a.preventDefault();var e=$(".pendientes-montaje");$.ajax({url:"funciones.php",type:"POST",data:{infopendientes:1},success:function(a){$(".pendientes-montaje tbody").append(a),$(".background").fadeIn(),e.fadeIn(),e.animate({right:"0%"});setTimeout(function(){e.animate({right:"-85%"}),e.find("tbody").empty(),e.fadeOut(),$(".background").fadeOut()},2e4)}})}),$("body").on("click",'a[href="consumo-ngvlp1"]',function(a){a.preventDefault(),$("#confirmconsumirngvlp1").dialog(z).dialog("open"),$("#confirmconsumirngvlp1 input").focus()}),$("body").on("click",'a[href="consumo-ngvip"]',function(a){a.preventDefault(),$("#confirmconsumirngvip").dialog(O).dialog("open"),$("#confirmconsumirngvip input").focus()}),$("body").on("click",'a[href="consumo-soporte"]',function(a){a.preventDefault(),$("#confirmconsumirsoporte").dialog(P).dialog("open"),$("#confirmconsumirsoporte input").focus()}),$("body").on("click",'a[href="consumo-caseip"]',function(a){a.preventDefault(),$("#confirmconsumircaseip").dialog(k).dialog("open"),$("#confirmconsumircaseip input").focus()}),$("body").on("click",'a[href="consumo-alabesip"]',function(a){a.preventDefault(),$("#confirmconsumiralabeip").dialog(A).dialog("open"),$("#confirmconsumiralabeip input").focus()}),$(".cerrar-lateral").tooltip(),$("body").on("click",".cerrar-lateral",function(){$(".pendientes-montaje").animate({right:"-85%"}),$(".pendientes-montaje").find("tbody").empty(),$(".pendientes-montaje").fadeOut(),$(".background").fadeOut()}),$(document).on("click","button#cierre-ngv",function(a){$(".dropdown-cierres li.badges-ngvs").remove(),d($("input#seriengv").val())}),$(document).on("keyup","input#seriengv",function(a){13==a.which&&$("input#seriengv").length>0&&($(".dropdown-cierres li.badges-ngvs").remove(),d($("input#seriengv").val()))}),$(document).on("click",".status-cierres",function(a){$("input#seriengv").val(""),"none"==$(".dropdown-cierres form").css("display")&&$(".dropdown-cierres form").fadeIn(),$(".dropdown-cierres li.badges-ngvs").length&&$(".dropdown-cierres li.badges-ngvs").remove()}),$(document).on("keyup","#seriengv",function(){p($("#seriengv").val(),$("#seriengv"))});var b={autoOpen:!1,modal:!0,title:"NGV'S LP1 consumidos",buttons:{OK:function(){$(this).dialog("close")}}},g={autoOpen:!1,modal:!0,title:"NGV'S IP consumidos",buttons:{OK:function(){$(this).dialog("close")}}},h={autoOpen:!1,modal:!0,title:"ALABES IP consumidos",buttons:{OK:function(){$(this).dialog("close")}}},_={autoOpen:!1,modal:!0,title:"Soporte HP/IP consumido",buttons:{OK:function(){$(this).dialog("close")}}},y={autoOpen:!1,modal:!0,title:"Carcasa IP consumida",buttons:{OK:function(){$(this).dialog("close")}}},z={autoOpen:!1,modal:!0,title:"NGV LP1 consumidos",buttons:{OK:function(){var a=$(this).find("input").val();a.length>5&&(o(a),$(this).dialog("close"))},CANCELAR:function(){$(this).dialog("close")}}},O={autoOpen:!1,modal:!0,title:"NGV IP consumidos",buttons:{OK:function(){var a=$(this).find("input").val();a.length>5&&(i(a),$(this).dialog("close"))},CANCELAR:function(){$(this).dialog("close")}}},P={autoOpen:!1,modal:!0,title:"Soporte HP/IP",buttons:{OK:function(){var a=$(this).find("input").val();a.length>5&&(s(a),$(this).dialog("close"))},CANCELAR:function(){$(this).dialog("close")}}},k={autoOpen:!1,modal:!0,title:"Carcasa IP",buttons:{OK:function(){var a=$(this).find("input").val();a.length>5&&(l(a),$(this).dialog("close"))},CANCELAR:function(){$(this).dialog("close")}}},A={autoOpen:!1,modal:!0,title:"ALABESIP consumidos",buttons:{OK:function(){var a=$(this).find("input").val();a.length>5&&(r(a),$(this).dialog("close"))},CANCELAR:function(){$(this).dialog("close")}}}})}});